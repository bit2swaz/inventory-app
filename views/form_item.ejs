<div class="breadcrumb">
  <a href="/">Home</a> &gt; 
  <% if (item.id) { %>
    <a href="/item/<%= item.id %>"><%= item.name %></a> &gt; Edit
  <% } else { %>
    Add New Item
  <% } %>
</div>

<section class="form-container">
  <h2><%= item.id ? 'Edit Item' : 'Add New Item' %></h2>
  
  <% if (errors.length > 0) { %>
    <div class="error-container">
      <ul class="errors">
        <% errors.forEach(error => { %>
          <li><%= error.msg %></li>
        <% }); %>
      </ul>
    </div>
  <% } %>
  
  <form method="POST" action="<%= item.id ? `/item/${item.id}/update` : '/item/new' %>">
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" value="<%= item.name || '' %>" required>
    </div>
    
    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" name="description" rows="4" required><%= item.description || '' %></textarea>
    </div>
    
    <div class="form-row">
      <div class="form-group half">
        <label for="price">Price ($)</label>
        <input type="number" id="price" name="price" step="0.01" min="0" value="<%= item.price || '' %>" required>
      </div>
      
      <div class="form-group half">
        <label for="quantity">Quantity</label>
        <input type="number" id="quantity" name="quantity" min="0" value="<%= item.quantity || 0 %>" required>
      </div>
    </div>
    
    <div class="form-group">
      <label for="image_url">Image URL</label>
      <input type="url" id="image_url" name="image_url" value="<%= item.image_url || '' %>">
      <small>Enter a URL for the product image (optional)</small>
    </div>
    
    <div class="form-group">
      <label for="category_id">Category</label>
      <select id="category_id" name="category_id" required>
        <option value="">-- Select Category --</option>
        <% categories.forEach(category => { %>
          <option value="<%= category.id %>" <%= (item.category_id == category.id) ? 'selected' : '' %>><%= category.name %></option>
        <% }); %>
      </select>
    </div>
    
    <div class="form-actions">
      <a href="<%= item.id ? `/item/${item.id}` : '/' %>" class="btn btn-secondary">Cancel</a>
      <button type="submit" class="btn btn-primary"><%= item.id ? 'Update' : 'Create' %> Item</button>
    </div>
  </form>
</section> 