<div class="page-header">
  <div class="breadcrumb">
    <a href="/">Categories</a>
    <% if (item.id && item.category_id) { %>
      &gt; <a href="/categories/<%= item.category_id %>">Category</a>
    <% } %>
    &gt; <%= item.id ? 'Edit ' + item.name : 'New Item' %>
  </div>
</div>

<div class="form-container">
  <h2><%= item.id ? 'Edit Item' : 'Create New Item' %></h2>
  
  <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
    <div class="alert alert-error">
      <ul class="error-list">
        <% errors.forEach(error => { %>
          <li><%= error.msg %></li>
        <% }); %>
      </ul>
    </div>
  <% } %>
  
  <form method="POST" action="<%= item.id ? `/items/${item.id}/update` : '/items/create' %>">
    <div class="form-group">
      <label for="name">Name</label>
      <input 
        type="text" 
        id="name" 
        name="name" 
        value="<%= item.name %>" 
        required
        maxlength="100"
      >
    </div>
    
    <div class="form-group">
      <label for="description">Description</label>
      <textarea 
        id="description" 
        name="description" 
        maxlength="1000"
        rows="4"
      ><%= item.description %></textarea>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label for="price">Price ($)</label>
        <input 
          type="number" 
          id="price" 
          name="price" 
          value="<%= item.price %>" 
          step="0.01" 
          min="0"
          required
        >
      </div>
      
      <div class="form-group">
        <label for="quantity">Quantity</label>
        <input 
          type="number" 
          id="quantity" 
          name="quantity" 
          value="<%= item.quantity %>" 
          min="0"
          required
        >
      </div>
    </div>
    
    <div class="form-group">
      <label for="image_url">Image URL</label>
      <input 
        type="url" 
        id="image_url" 
        name="image_url" 
        value="<%= item.image_url %>"
        placeholder="https://example.com/image.jpg"
      >
    </div>
    
    <div class="form-group">
      <label for="category_id">Category</label>
      <select id="category_id" name="category_id" required>
        <option value="">Select a category</option>
        <% categories.forEach(category => { %>
          <option value="<%= category.id %>" <%= item.category_id == category.id ? 'selected' : '' %>>
            <%= category.name %>
          </option>
        <% }); %>
      </select>
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <%= item.id ? 'Update Item' : 'Create Item' %>
      </button>
      <a href="<%= item.id ? `/items/${item.id}` : '/' %>" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
</div> 